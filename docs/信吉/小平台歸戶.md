# è§’è‰²å»ºç«‹

###### tags: `ä¿¡å‰`

åƒè€ƒ API é€šç”¨æ ¼å¼ : [é€£çµ](/8noUxRMeTsWpyUam5wK3dQ)

å¤§å¹³å°æœƒå‘¼å«è©²ä½œæ¥­å…©æ¬¡ï¼Œä¸€æ¬¡æœƒæœ‰åƒæ•¸ï¼Œä¸€æ¬¡æ²’åƒæ•¸
æ²’åƒæ•¸çš„è¬¹å›æ‡‰ status.code = 200 å³å¯
æœ‰åƒæ•¸æ™‚å°‡è¨˜éŒ„åˆ°è©² session ä¸‹åšå­˜æ”¾å¾ŒçºŒé©—è­‰æˆåŠŸé ˆå¸¶è‘—åƒæ•¸å›æ‡‰

## ğŸ’  ä¾†æº URL åŠè³‡æ–™æ ¼å¼

| é …ç›®   | èªªæ˜             |
| ------ | ---------------- |
| URL    | /einv/smalltobig |
| method | post             |

## âœ… Request æ¬„ä½

| æ¬„ä½   | åç¨±     | è³‡æ–™å‹åˆ¥ | å¿…å¡« | è³‡æ–™å„²å­˜ & èªªæ˜ |
| ------ | -------- | -------- | ---- | --------------- |
| phone  | é›»è©±è™Ÿç¢¼ | string   | Y    | Y/N             |
| userid | æœƒå“¡ç·¨è™Ÿ | string   | Y    |

#### Request ç¯„ä¾‹

```json
{
  "phone": "0911756824",
  "userid": "A00001"
}
```

#### Request å¾Œç«¯æµç¨‹èªªæ˜

1. æª¢æ ¸ ERP ç”¨æˆ¶åŠé›»è©±æ˜¯å¦å­˜åœ¨ #ERPé©—è­‰
2. å‘¼å«å¤§å¹³å° API åƒè€ƒ #å‘¼å«å¤§å¹³å°
3. 

#### å‘¼å«å¤§å¹³å°

| æ¬„ä½      | åç¨±     | è³‡æ–™å‹åˆ¥ | å¿…å¡« | è³‡æ–™å„²å­˜ & èªªæ˜     |
| --------- | -------- | -------- | ---- | ------------------- |
| card_ban  | çµ±ç·¨     | string   | Y    | å›ºå®šå€¼(ç³»çµ±åƒæ•¸)    |
| card_no1  | æœƒå“¡é¡¯ç¢¼ | string   | Y    | userid              |
| card_no2  | æœƒå“¡éš±ç¢¼ | string   | Y    | userid              |
| card_type | è¼‰å…·é¡åˆ¥ | string   | Y    | å›ºå®š BG0001         |
| back_url  | æœ€çµ‚ç•«é¢ | string   | Y    | åƒæ•¸è¨­å®š            |
| token     | token    | string   | Y    | è©² session çš„ token |

##### ERP æª¢é©—è³‡æ–™

http://192.168.10.200:88/api/members/check/{memberId}/{phoneNumber}
memberId=userid
phoneNumber = phone

## Response æ¬„ä½

| æ¬„ä½  | åç¨±               | è³‡æ–™å‹åˆ¥ | å¿…å¡« | è³‡æ–™å„²å­˜ & èªªæ˜ |
| ----- | ------------------ | -------- | ---- | --------------- |
| token | å¤§å¹³å°æ™‚æ•ˆæ€§ token | string   | N    | req.token       |
| nonce | éš¨æ©Ÿè®Šæ•¸           | string   | N    | è‡ªè¡Œç”¢ç”Ÿ        |

#### Response ç¯„ä¾‹

```json
{
    token:"åŸå€¼å¸¶å›"
    nonce:"1234567890ABCDEF"
}
```
